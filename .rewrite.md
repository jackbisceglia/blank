# Rewrite Roadmap

## 1. Infrastructure-as-Code (IaC) Setup

### A. Environment and Common Configuration

- [ ] Gather all environment variables and SST secrets from the old config
- [ ] Create a central configuration file or set of files
- [ ] Define common naming conventions, resource tags, and environment-specific parameters
- [ ] Choose and set up your IaC tool (e.g., CloudFormation, Terraform, or SST’s built-in IaC)

### B. Frontend IaC Layer

- [ ] Create IaC definitions for frontend hosting/distribution (S3, CloudFront, etc.)
- [ ] Define region settings, caching policies, and logging
- [ ] Verify basic deployment using a sample “hello world” page

### C. Zero-Sync IaC Layer

- [ ] Define resources required by Zero-Sync
- [ ] Configure the IaC to deploy Zero-Sync infrastructure
- [ ] Validate the deployment with a minimal sync test

### D. Env Vars/SST Secrets IaC Layer

- [ ] Integrate the old environment values into the IaC config
- [ ] Ensure secrets management is secure (e.g., using AWS Secrets Manager or Parameter Store)
- [ ] Test that the app can read and use these values on deploy

### E. API IaC Layer (Edge Cases) _Can be deferred_

- [ ] Outline the structure for API resources
- [ ] Plan to incorporate this once the core infrastructure is stable

---

## 2. Frontend Rewrite (React + TanStack Router)

### A. Recreate Directory/Page Structures

- [ ] Map out the existing page hierarchy and plan the new structure
- [ ] Scaffold out new pages in the repo
- [ ] Setup basic routing with TanStack Router and create placeholder pages

### B. Zero-Sync Setup

- [ ] Integrate Zero-Sync logic into the new React app
- [ ] Connect the frontend to the deployed Zero-Sync layer
- [ ] Write tests or perform manual verification of the data sync

### C. Providers (Zero/Auth/Global Components)

- [ ] Identify needed providers and global components
- [ ] Migrate authentication and state management logic
- [ ] Test each provider (e.g., using dummy pages to check auth protection)

### D. CSS Library (shadcn/ui)

- [ ] Install and set up the shadcn/ui library
- [ ] Build a style guide or sample page to validate CSS settings
- [ ] Gradually integrate UI components into your new pages

---

## 3. Database Utilities Rewrite

### A. Set Up Drizzle for Migrations and Schema Definitions

- [ ] Integrate Drizzle into your core package
- [ ] Create a folder/module for migrations

### B. Write and Test Migration Scripts

- [ ] Write initial migration scripts and test with a dev database
- [ ] Document which parts Zero-Sync handles vs. which require Drizzle intervention

### C. Integrate with Zero-Sync Where Needed

- [ ] Identify utilities where a direct Drizzle fallback is required
- [ ] Write helper functions or adapters as required

---

## 4. Rewrite LLM Abstraction

### A. Inventory and Define Use Cases

- [ ] Document existing LLM functionality, endpoints, and integrations
- [ ] Define the desired improvements in the new abstraction

### B. Define a Clear Interface

- [ ] Abstract LLM calls behind an interface to decouple app components
- [ ] Write unit tests that describe expected behavior

### C. Implement and Test

- [ ] Create a minimal implementation covering at least one use case
- [ ] Expand tests and implementation to cover all necessary cases

---

## Prioritization and Bridging Blockers

- [ ] **Primary Focus:** Start with the IaC layers to build a reliable deployment pipeline.
- [ ] **Parallel Workflows:** If one IaC task is blocked (e.g., API layer), work on frontend or database utilities.
- [ ] **LLM Abstraction:** Use this as a decoupled task that can be addressed in parallel if needed.
- [ ] **Iterative Verification:** After completing each major segment, pause for testing and validation.
